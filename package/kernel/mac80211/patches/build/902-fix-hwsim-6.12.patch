--- a/drivers/net/wireless/virtual/mac80211_hwsim.c
+++ b/drivers/net/wireless/virtual/mac80211_hwsim.c
@@ -6411,8 +6411,13 @@
 		[HWSIM_VQ_RX] = "rx",
 	};
 
+#if LINUX_VERSION_IS_LESS(6,12,0)
 	return virtio_find_vqs(vdev, HWSIM_NUM_VQS,
 			       hwsim_vqs, callbacks, names, NULL);
+#else
+	return virtio_find_vqs(vdev, HWSIM_NUM_VQS,
+			       hwsim_vqs, vqs_info, NULL);
+#endif
 }
 
 static int fill_vq(struct virtqueue *vq)
